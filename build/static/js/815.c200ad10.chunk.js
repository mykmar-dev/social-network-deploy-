"use strict";(self.webpackChunkreact_way_of_samurai=self.webpackChunkreact_way_of_samurai||[]).push([[815],{5815:function(t,e,n){n.r(e),n.d(e,{default:function(){return B}});var o=n(8683),r=n(5671),i=n(3144),s=n(136),a=n(5716),l=n(2791),u=n(885),c="ProfileInfo_descriptionBlock__DvEKm",d="ProfileInfo_userPhoto__3g4nf",f=n(9234),h=n(2495),p=n(5987),m=n(184),x=["pathname"],j=function(t){var e=t.pathname,n=(0,p.Z)(t,x),o=(0,l.useState)(!1),r=(0,u.Z)(o,2),i=r[0],s=r[1],a=(0,l.useState)(n.status),c=(0,u.Z)(a,2),d=c[0],f=c[1];(0,l.useEffect)((function(){f(n.status)}),[n.status]);return(0,m.jsx)(m.Fragment,{children:"/profile"==e?(0,m.jsxs)("div",{children:[!i&&(0,m.jsx)("div",{children:(0,m.jsxs)("span",{onDoubleClick:function(){s(!0)},children:[(0,m.jsx)("b",{children:"Status: "}),n.status||"-------"]})}),i&&(0,m.jsx)("div",{children:(0,m.jsx)("input",{onChange:function(t){f(t.currentTarget.value)},autoFocus:!0,onBlur:function(){s(!1),n.updateStatus(d)},value:d})})]}):(0,m.jsx)("div",{children:d})})},v=n(9086),b=n(704),P=n(9024),g=(0,b.Z)({form:"profileData"})((function(t){var e=t.handleSubmit,n=t.contacts,o=t.setEditMode,r=t.error;return(0,m.jsxs)("div",{children:[(0,m.jsx)("button",{onClick:function(){o(!1)},children:"Close"}),(0,m.jsxs)("form",{onSubmit:e,children:[r&&(0,m.jsxs)("div",{className:f.Z.formSummaryError,children:[" ",r," "]}),(0,m.jsx)("button",{children:"Save"}),(0,v.Gr)("nickname","nickname",[],v.II),(0,v.Gr)("fullName","fullName",[],v.II),(0,v.Gr)("aboutMe","aboutMe",[],v.II),(0,v.Gr)("lookingForAJob","lookingForAJob",[],v.II),(0,v.Gr)("lookingForAJobDescription","lookingForAJobDescription",[],v.II),Object.keys(n).map((function(t){return(0,v.Gr)(t,"contacts."+t,[],v.II)})),(0,v.Gr)("country","location.country",[],v.II),(0,v.Gr)("city","location.city",[],v.II)]})]})})),k=function(t){var e=t.profile,n=e.fullName,o=e.aboutMe,r=e.lookingForAJob,i=e.lookingForAJobDescription,s=e.contacts,a=e.location,l=a.country,u=a.city;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"nickname:"})," ",t.nickname]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"fullName:"})," ",n]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"aboutMe:"})," ",o]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"lookingForAJob:"})," ",r]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"lookingForAJobDescription:"})," ",i]}),(0,m.jsx)("br",{}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"contacts:"})," ",Object.keys(s).map((function(t){return(0,m.jsxs)("div",{children:[(0,m.jsxs)("b",{children:[t,":"]})," ",s[t]]})}))]}),(0,m.jsx)("br",{}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"country:"})," ",l]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"city:"})," ",u]})]})},y=function(t){var e=t.status,n=t.updateStatus,o=t.profile,r=t.setProfilePhoto,i=t.location.pathname,s=t.setProfileData,a=(0,l.useState)(!1),f=(0,u.Z)(a,2),p=f[0],x=f[1];if(!o)return(0,m.jsx)(h.Z,{});return(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:c,children:[(0,m.jsx)("img",{src:o.photo,className:d,onError:P.q}),(0,m.jsx)(j,{status:e,updateStatus:n,pathname:i}),"/profile"==i&&(0,m.jsx)("input",{type:"file",onChange:function(t){t.target.files.length&&r(t.target.files[0])}}),"/profile"==i&&!p&&(0,m.jsx)("div",{children:(0,m.jsx)("button",{onClick:function(){x(!0)},children:"Edit"})}),p?(0,m.jsx)(g,{setEditMode:x,onSubmit:function(t){s(t).then((function(){x(!1)}))},contacts:o.contacts}):(0,m.jsx)(k,{profile:o,nickname:t.nickname})]})})},S=n(6070),I=n(2982),_="MyPosts_postsBlock__N+vxb",Z="MyPosts_posts__iDY5t",D="Post_item__GnUgi",A=function(t){return(0,m.jsxs)("div",{className:D,children:[(0,m.jsx)("img",{src:t.photo,onError:P.q}),t.message,(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{children:"like"})," ",t.likesCount]})]})},C=n(6139),N=n(5304),w=(0,N.DT)(10),F=(0,b.Z)({form:"ProfileAddNewPostForm"})((function(t){return t.submitSucceeded&&t.reset(),(0,m.jsxs)("form",{onSubmit:t.handleSubmit,children:[(0,m.jsx)("div",{children:(0,m.jsx)(C.Z,{name:"newPostText",component:v.gx,placeholder:"Post message",validate:[N.C1,w]})}),(0,m.jsx)("div",{children:(0,m.jsx)("button",{children:"Add post"})})]})})),E=l.memo((function(t){var e=(0,I.Z)(t.posts).reverse().map((function(e){return(0,m.jsx)(A,{message:e.message,likesCount:e.likesCount,photo:t.photo})}));return(0,m.jsxs)("div",{className:_,children:[(0,m.jsx)("h3",{children:"Posts"}),"/profile"===t.location.pathname&&(0,m.jsx)(F,{onSubmit:function(e){t.addPost(e.newPostText)}}),(0,m.jsx)("div",{className:Z,children:e})]})})),G=n(364),J=n(7781),M=n(9271),T=(0,J.qC)(M.EN,(0,G.$j)((function(t){var e=null;return t.profilePage.profile&&(e=t.profilePage.profile.photo),{posts:t.profilePage.posts,newPostText:t.profilePage.newPostText,photo:e}}),(function(t){return{addPost:function(e){t((0,S.Wl)(e))}}})))(E),U=function(t){return(0,m.jsxs)("div",{children:[(0,m.jsx)(y,{setProfileData:t.setProfileData,location:t.location,setProfilePhoto:t.setProfilePhoto,login:t.login,profile:t.profile,status:t.status,updateStatus:t.updateStatus,nickname:t.nickname}),(0,m.jsx)(T,{})]})},q=function(t){(0,s.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"refreshProfile",value:function(){var t=this.props.match.params.userId;t||(t=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(t),this.props.getStatus(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t){this.props.location===t.location&&t.isAuth===this.props.isAuth||this.refreshProfile()}},{key:"render",value:function(){return(0,m.jsx)(U,(0,o.Z)((0,o.Z)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,setProfilePhoto:this.props.setProfilePhoto,location:this.props.location,setProfileData:this.props.setProfileData,nickname:this.props.nickname}))}}]),n}(l.Component),B=(0,J.qC)((0,G.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.userId,isAuth:t.auth.isAuth,nickname:t.auth.nickname}}),{getUserProfile:S.et,getStatus:S.lR,updateStatus:S.Nf,setProfilePhoto:S.jY,setProfileData:S._J}),M.EN)(q)},9024:function(t,e,n){n.d(e,{q:function(){return r}});var o=n(4353),r=function(t){var e=t.currentTarget;e.onerror=null,e.src=o}},4353:function(t,e,n){t.exports=n.p+"static/media/user.96e310a6add3a711174d.png"},885:function(t,e,n){n.d(e,{Z:function(){return r}});var o=n(181);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,r,i=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(o=n.next()).done)&&(i.push(o.value),!e||i.length!==e);s=!0);}catch(l){a=!0,r=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return i}}(t,e)||(0,o.Z)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=815.c200ad10.chunk.js.map